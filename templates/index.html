<!DOCTYPE html>
<html>
<head>
    <title>Fraud Detection</title>
    <script>
        function loadRandomFeatures() {
            fetch("/random_features")
                .then(response => response.json())
                .then(data => {
                    let table = "<table border='1'><tr><th>Feature</th><th>Value</th></tr>";
                    for (const [key, value] of Object.entries(data)) {
                        table += `<tr><td>${key}</td><td>${value}</td></tr>`;
                    }
                    table += "</table>";
                    document.getElementById("randomFeatures").innerHTML = table;
                });
        }
    </script>
</head>
<body>
    <h1>Fraud Detection System</h1>

    <form method="POST">
        <label for="Amount">Amount:</label>
        <input type="number" name="Amount" step="0.01" required><br><br>

        <label for="Time">Time:</label>
        <input type="number" name="Time" step="0.01" required><br><br>

        <button type="submit">Predict</button>
    </form>

    {% if fraud_prob is not none %}
        <h2>Prediction Result</h2>
        <p>Fraud Probability: {{ fraud_prob|round(4) }}</p>
        <p>Prediction: {{ "Fraud" if pred_label == 1 else "Not Fraud" }}</p>
    {% endif %}

    <hr>
    <button onclick="loadRandomFeatures()">View Random V1â€“V28 Values</button>
    <div id="randomFeatures"></div>
</body>
</html>
